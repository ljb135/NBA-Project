{%  extends "layout.html" %}
{% block content %}
<div class = "subheading">
  <h2>
    Enter the names and years of the players on both teams.
    <br>
    5 players for each team are required - you may enter up to 13.
  </h2>
</div>

<form method="POST">
  {{ form.hidden_tag() }}
  <div class="column">
    <h3>
      <u><b>Home Team</b></u>
    </h3>
    <div class="form"> <h4>1. </h4> {{ form.year }} {{ form.player_name }} </div>
  </div>

  <div class="column">
    <h3>
      <u><b>Away Team</b></u>
    </h3>
    <h3>No Players Yet</h3>
  </div>

  <div class="form">
    {{ form.submit }}
  </div>
</form>

<script>
  let year_select = document.getElementById("year");
  let name_select = document.getElementById("player_name");

  year_select.onchange = function(){
    year = year_select.value;
    fetch("/update/" + year).then(function(response){
      response.json().then(function(data){
        let optionHTML = '';
        for(let player of data.players){
          optionHTML += '<option value="' + player.player_id + '">' + player.name + '</option>';
        }
        name_select.innerHTML = optionHTML;
      });
    });
  }
</script>
{% endblock content %}
